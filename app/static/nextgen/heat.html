<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>heat</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Jim Smith">
	<!-- Date: 2011-04-19 -->


	<style type="text/css" media="screen">
		#op {
			font: 75% "Lucida Grande", "Trebuchet MS", Verdana, sans-serif;
			text-shadow: #DDD 2px 2px 2px;
		}
	</style>
<script src="lib/maths.js" type="text/javascript" charset="utf-8"></script>

	<script src="lib/micro.js" type="text/javascript" charset="utf-8"></script>

	<script type="text/javascript" charset="utf-8">
		xhr.once("short_apps.json", parsej);
		
		function sorter(a, b) { return b.downloads - a.downloads}
		
		function parsej(res) {
			var rez = JSON.parse(res);
			rez.sort(sorter);
			
			var max = rez[0].downloads;
			var min = rez[rez.length-1].downloads;
			var tmax = 24;
			var tmin = 10;
			
			for (var i = 0; i < rez.length; i++) {
				$('op').innerHTML += '<span style="color:rgba(0,0,0,'+(1-(1/rez.length)*i)+');font-size:' + Math.floor(maths.map(rez[i].downloads, max, min, tmax, tmin)) + 'px" id="app'+ i +'"> â€¢' + rez[i].app + "</span> &nbsp; ";
			}
			
			setInterval(
				function() {
					var tg = 'app' + Math.floor(Math.random() * rez.length);
					var oc = $(tg).style.color;
					$(tg).style.color = "#E20074";	
					var orig = $(tg).style.fontSize;
					$(tg).style.fontSize = cw.getPixels(orig) * 1.2 + "px";	
					setTimeout(function() {
						$(tg).style.color = oc;
						$(tg).style.fontSize = orig;	
						
					}, 3000); 			
				},
				2000
			
			);
			
		}
		
	</script>

</head>
<body>
<div id="op">
	
</div>
</body>
</html>
