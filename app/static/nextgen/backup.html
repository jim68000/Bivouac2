<html>
	<head>
		<meta name="viewport" content="width=device-width,  maximum-scale=1.0" />
		<title>NextGen</title>

		<script src="lib/micro.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/plushness.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/brush.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/blind.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/maths.js" type="text/javascript" charset="utf-8"></script>
		
		<script type="text/javascript" charset="utf-8">

		</script>
		<link rel="stylesheet" href="demo.css" type="text/css" media="screen" title="no title" charset="utf-8">
		<link rel="stylesheet" href="speedo.css" type="text/css" media="screen" title="no title" charset="utf-8">

	</head>
	<body id="index">
		
		
		
		

		
		
		
		
		
		
			<div id="header">
				<img src="imgs/t-logo.png" width="152" height="30" alt="T Logo">
				<div id="searchbox">
					<input type="submit" name="some_name" value="Go" id="some_name">
					<input type="text" name="some_name" value="" id="some_name">
				</div>
				<div id="salutation">

					<div id="controls">
						<img src="imgs/add.png">
						<img src="imgs/edit.png">
					</div>
					<div id="userid">
						Hello Jim<br>
						Not Jim? <a href="#">Logout</a>						
					</div>					

				</div>
			</div>
			
			
			<div id="your_account" class="ac_box">
				<h1 id="your_account">
				<img src="imgs/tonly.png" alt="Tonly" id="annoying_sub_logo">Your Account</h1>
				<div id="ac_details">
					<div id="basic">
						<p class="info">Overview</p>
						<p class="info"><span class="nummer">0221 636 37373 373</span></p>
						<p class="info">Call &amp; Surf Basic mit Internet - Flatrate</p>
					</div>
					<div id="speedometer">
						<div id="odometer">
							<p class="info">Telefonie Festzetz</p>
							<p class="info"><span class="infocost">32,35</span> &euro;</p>
							<p class="info">Telefonie Mobilfunknetz</p>
							<p class="info"><span class="infocost">3,67</span> &euro;</p>
						</div>
						
						
						<div id="speedo">
								<img src="imgs/speedo/dial.png" width="200" height="200" alt="" id="dial">
								<img src="imgs/speedo/indicator.png" width="200" height="200" alt="Indicator" id="indicator" class="null">
								<img src="imgs/speedo/gradations.png" width="200" height="200" alt="" id="graticulations">
								<div id="speed">
									0Mbits
								</div>
						</div>
					</div>
				</div>
				
				<div id="extra_kunden">
					<div id="allowances" class="rabout">
						<div id="data" class="bar">
							<div id="data_used" class="anim_data">
							</div>
							<div class="bar_label">Data used</div>
							<div class="bar_totals" id="data_total">768/1024 Mb</div>				
							
						</div>
						<div id="sms" class="bar">
							<div id="sms_used" class="anim_data">

							</div>	
							<div class="bar_label">SMS used</div>
							<div class="bar_totals" id="sms_total">330/1000 SMS</div>				
											
						</div>
						<div id="calls" class="bar">
							<div id="calls_used" class="anim_data">

							</div>	
							<div class="bar_label">Voice minutes used</div>
							<div class="bar_totals" id="voice_total">100/1200 minutes</div>				
						</div>
					</div>
				</div>
				
				<div id="kundencenter">
					<div id="view_account">
						<h2>Kundencenter</h2>
						<div class="button"><!-- Can't be bothered to fix iOS buttons TODO dirty hack-->
							View Account Details
						</div>						
					</div>
					<div id="hot_spot">
						<div id="inner_hot_spot" style="float:right">
							<h2>Telekom Hotspot Connection</h2>
							<div class="floated time">0<br>hrs</div> <div class="floated intertime">:</div><div class="floated time buffer" id="minutes">13<br>mins</div>
							<div class="button floated"><!-- Can't be bothered to fix iOS buttons TODO dirty hack-->
								Logout
							</div>	
							<div class="button floated plain"><!-- Can't be bothered to fix iOS buttons TODO dirty hack-->
								Settings
							</div>
						</div>
					</div>
					<div id="thumb">
						
					</div>
				</div>
			</div>
		<div id="shade" style="display:none">
			
		</div>
		
		<div id="top_downloads" class="phi_left">
			<h1>Top Downloads <a href="javascript:live_sales()">See live sales!</a></h1>
			<p>
				<div class="icon_box">
					<img src="imgs/icons/telefonbuch.gif" width="50" height="50" alt="Telefonbuch">
					<br>Telefonbuch
				</div>
				<div class="icon_box">
					<img src="imgs/icons/Einkaufswelt.jpg" width="50" height="50" alt="Einkaufswelt">
					<br>Einkaufswelt
				</div>
				<div class="icon_box">
					<img src="imgs/icons/Leo.gif" width="50" height="50" alt="Leo">
					<br>Leo
				</div>
				<div class="icon_box">
					<img src="imgs/icons/store_apps.gif" width="50" height="50" alt="Store Apps">
					<br>Store Apps
				</div>
				<div class="icon_box">
					<img src="imgs/icons/Otto.gif" width="50" height="50" alt="Otto">
					<br>Otto
				</div>				
				<div class="icon_box">
					<img src="imgs/icons/liveticker.gif" width="50" height="50" alt="Liveticker">
					<br>LiveTicker
				</div>				

				<div class="icon_box">
					<img src="imgs/icons/Amazon.gif" width="50" height="50" alt="Amazon">
					<br>Amazon
				</div>
			
				<div class="icon_box">
					<img src="imgs/icons/3min.gif" width="50" height="50" alt="3min">
					<br>3min
				</div>
			
						
			
			</p>
		</div>

		<div id="news_box" class="phi_right">
			<h1>Spiegel</h1>
			<div class="news_img" onclick="expando(this)"></div>
			<h2>Berlin's Peaceful Day of Rage</h2>
			<p>Berlin's traditional May 1 riots fell short of the violence seen in recent years.</p>
			<p class="updated">Updated 2 hours ago</p>
		</div>
		
		<div id="meine_fotos">
			<h2 class="like_news_box">Meine Fotos</h2>
			<div id="outslider" class="outslider">
				<div id="photoslider" class="photoslider">

				</div>			
			</div>			
		</div>
		
		
			
		<div id="debug">
			
		</div>
		

<script src="images.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" charset="utf-8">
		
		var mins = 13;
		
		document.addEventListener("DOMContentLoaded", function() {
			setTimeout(function() {	
				cw.add($('indicator'), "slow");
				// console.log("fired");
				$('indicator').addEventListener('webkitAnimationEnd', function( event ) { 
					$('speed').innerHTML = "6Mbits" 
					cw.add($('speed'), "speed");
				}, false );		
			}, 1231);
		
			
			
			setInterval(
				function() {
					$('minutes').innerHTML = ++mins + "<br>mins";
					cw.add($('minutes'), "minutes_flash");
					setTimeout(
						function() {
							cw.remove($('minutes'), "minutes_flash");
						}, 1000
					);
					
				}, 60 * 1000
			);
			
			make_blind($('thumb'), $('extra_kunden'), 
				function() {
					cw.add($('data_used'), 'seventy');
					cw.add($('sms_used'), 'thirty');
					cw.add($('calls_used'), 'ten');
					
					setTimeout(function() {
						$('data_total').style.opacity = ".999";			
						$('sms_total').style.opacity = ".999";			
						$('voice_total').style.opacity = ".999";			
						
					}, 2000);
					
					
				}
			);
			
		});
		
		function enshade() {
			$('shade').style.display = "block";
		}
		
		function unshade() {
			$('shade').style.display = "none";
		}
		
		var expanded = false;
		function expando(obj) {
			
			if (!expanded) {
				expanded = true;
				var tt = obj.offsetTop;
				var ll = obj.offsetLeft;
				var moon = obj.cloneNode();
				moon.style.position = "absolute";
				moon.id = "expanded_image";
				moon.style.top = (tt-6) + "px";
				moon.style.left = ll + "px";
				document.getElementsByTagName('body')[0].appendChild(moon);
				moon.style.zIndex = 999;
				var i = new Image();
				i.src = getComputedStyle(moon).backgroundImage.replace("url(", "").replace(")", "");
				enshade();


				setTimeout(function() {
					moon.style.height = i.height + "px"; 
					moon.style.width = i.width + "px"; 
					moon.style.backgroundPosition = "0px 0px";
					moon.style.left = '1em'; 
					moon.style.top = '1em';
					BRUSH.addScroll($('expanded_image'), $('expanded_image'));
				}, 20);

				setTimeout(function() {
					var div = document.createElement("div");
					div.className = "caption";
					div.innerHTML = "A woman throws a custard pie at police as part of the Berlin May Day protests<span class='indicator'>&#9679; &#9675; &#9675; &#9675; &#9675; &#9675;</span> <span>&#x2715;";
					moon.appendChild(div);

				}, 1000);				
			} else {
				unshade();
				obj.parentElement.removeChild(obj);
				expanded = false;
			}
		}
		
		function closeMe() {
			unshade();
			$('op').parentElement.removeChild($('op'));			
		}
		
		
		function live_sales() {
			enshade();
			var div = document.createElement("div");
			div.id = 'op';
			div.onclick = closeMe;
			document.getElementsByTagName('body')[0].appendChild(div);
			xhr.once("med_apps.json", parsej);
			$('op').innerHTML += "&#x272A; ";
			var cls = setInterval(function() {
				$('op').innerHTML += "&#x272A; ";
			}, 10);
			
			
			function sorter(a, b) { return b.downloads - a.downloads}

			function parsej(res) {
				clearInterval(cls);
				op.innerHTML = "";
				var rez = JSON.parse(res);
				rez.sort(sorter);
				var max = rez[0].downloads;
				var min = rez[rez.length-1].downloads;
				var tmax = 64;
				var tmin = 10;

				for (var i = 0; i < rez.length; i++) {
					$('op').innerHTML += '<span style="color:rgba(255,255,255,'+(1-(1/rez.length)*i)+');font-size:' + Math.floor(maths.map(rez[i].downloads, max, min, tmax, tmin)) + 'px" id="app'+ i +'">' + rez[i].app + "</span> &nbsp; ";
				}

				setInterval(
					function() {
						var tg = 'app' + Math.floor(Math.random() * rez.length);
						var oc = $(tg).style.color;
						$(tg).style.color = "#E20074";	
						var orig = $(tg).style.fontSize;
						$(tg).style.fontSize = cw.getPixels(orig) * 1.1 + "px";	
						setTimeout(function() {
							$(tg).style.color = oc;
							$(tg).style.fontSize = orig;	

						}, 3000); 			
					},
					2000

				);

			}
			
		}

		</script>
	</body>
</html>